(function(n){"use strict";function u(n,t){var r={};for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i]);for(i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);return r}var i,t,r;i=Array.prototype.indexOf?function(n,t){return n.indexOf(t)}:function(n,t){for(var i=0,r=n.length;i<r;i++)if(n[i]===t)return i;return-1};t=function(n){var i=/\{(\w+)\}/g,t;for(n.optional||(n.optional=[]),this.route=n,this._params=[];(t=i.exec(this.route.url))!==null;)this._params.push(t[1])};t.prototype={build:function(n){var i=u(this.route.defaults,n),r={controller:!0,action:!0},t;return this.route.defaults.area&&this.route.defaults.area!==n.area?null:!this._checkConstraints(i)||!this._checkNonDefaultValues(i,r)?null:(t=this._merge(i,r),!t)?null:this._trimOptional(t)+this._extraParams(n,r,t.indexOf("?")>-1)},_checkNonDefaultValues:function(n,t){for(var r in this.route.defaults)if(this.route.defaults.hasOwnProperty(r)){if(this.route.defaults[r]!==n[r]&&i(this._params,r)===-1)return!1;t[r]=!0}return!0},_merge:function(n,t){for(var u=this.route.url,f=0,o=this._params.length;f<o;f++){var r=this._params[f],e=n[r]!==undefined,s=i(this.route.optional,r)>-1;if(!e&&!s)return null;e&&(u=u.replace("{"+r+"}",encodeURIComponent(n[r])));t[r]=!0}return u},_trimOptional:function(n){for(var t=n.split("/"),i=t.length-1;i>=0;i--)t[i].indexOf("{")>-1&&t.splice(i,1);return t.join("/")},_extraParams:function(n,t,i){var u="";for(var r in n)t[r]||(u+=(i?"&":"?")+encodeURIComponent(r)+"="+encodeURIComponent(n[r]),i=!0);return u},_checkConstraints:function(n){if(!this.route.constraints)return!0;this._parsedConstraints||(this._parsedConstraints=this._parseConstraints());for(var t in this._parsedConstraints)if(this._parsedConstraints.hasOwnProperty(t)&&!this._parsedConstraints[t].test(n[t]))return!1;return!0},_parseConstraints:function(){var t={};for(var n in this.route.constraints)this.route.constraints.hasOwnProperty(n)&&(t[n]=new RegExp("^("+this.route.constraints[n].replace(/\\/g,"\\")+")"));return t}};r=function(n){this.baseUrl=n.baseUrl;this.routes=[];for(var i=0,r=n.routes.length;i<r;i++)this.routes.push(new t(n.routes[i]))};r.prototype={action:function(n,t,i){return i=i||{},i.controller=n,i.action=t,(this.route(i)||"").toLowerCase()},route:function(n){for(var i,t=0,r=this.routes.length;t<r;t++)if(i=this.routes[t].build(n),i)return(this.baseUrl+i).toLowerCase();throw new Error("No route could be matched to route values: "+n);}};n.RouteJs={version:"{VERSION}",Route:t,RouteManager:r}})(window);
/*
//# sourceMappingURL=router.min.js.map
*/