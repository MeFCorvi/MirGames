@model MirGames.Domain.Forum.ViewModels.ForumPostsListItemViewModel

<article post-id="@Model.PostId" id="@(Model.FirstUnread ? "first-unread": null )" @Html.Css("message").Add("unread", !Model.IsRead).Add("first-post", Model.IsFirstPost)>
    @if (!Model.IsFirstPost)
    {
        <a class="message-index" href="#@Model.Index" id="@Model.Index">#@Model.Index</a>
    }
    <div class="author-block">
        <div class="author-name">
            @Author.UserLink(Model.Author, "topic-author")
        </div>
        <div class="avatar">
            @Author.UserAvatarLink(Model.Author, "author-avatar")
        </div>
        <div class="author-title">
            @Model.Author.Title
        </div>
        <div class="message-bar">
            @if (Model.CanBeEdited)
            {
                <a class="edit-post" href="javascript:void(0);" dialog="@Url.Action(MVC.Forum.Forum.EditPostDialog())" title="Редактировать"
                   dialog-close="reloadPost(@Model.PostId, @(Model.IsFirstPost ? "true" : "false"))"
                   resolve="{ 'post-id': @Model.PostId }" dialog-controller="MirGames.Forum.EditPostDialogController"><i class="fa fa-pencil-square-o"></i></a>
            }
            @if (Model.CanBeDeleted)
            {
                <a class="delete-post" href="javascript:void(0);" title="Удалить" dialog="@Url.Action(MVC.Forum.Forum.DeletePostDialog())"
                   dialog-close="hidePost(@Model.PostId)" resolve="{ 'post-id': @Model.PostId }"
                   dialog-controller="MirGames.Forum.DeletePostDialogController"><i class="fa fa-times"></i></a>
            }
        </div>
    </div>
    <div class="post-block">
        <div class="created-date">
            <i class="fa fa-clock-o"></i> <span class="topic-created-date">@Html.RelativeDate(Model.CreatedDate)</span>
        </div>
        <div class="text">
            @Html.Raw(Model.Text)
        </div>
        @if (Model.UpdatedDate > Model.CreatedDate)
        {
            <div class="edited">Отредактировано: @Html.DisplayFor(m => m.UpdatedDate)</div>
        }
    </div>
    @if (Model.IsFirstPost)
    {
        @Html.Partial("_SocialButtons")
    }
</article>
